(this.webpackJsonp=this.webpackJsonp||[]).push([[193],{"5QKO":function(e,t,i){"use strict";var n=i("bOix");t.a={methods:{timeFormatted:(e,t)=>Object(n.y)(t).format(e,n.T),tooltipTitle:e=>n.F.asDateTimeFull.format(e)}}},A5dm:function(e,t,i){"use strict";var n=i("LLbv"),a=i("waGw"),r=i("iQdY"),o=i("Pyw5"),s=i.n(o);const l={name:"GlTruncate",POSITION:r.a,directives:{GlTooltip:n.a,GlResizeObserver:a.a},props:{text:{type:String,required:!0},position:{type:String,required:!1,default:r.a.END,validator:e=>Object.values(r.a).includes(e)},withTooltip:{type:Boolean,required:!1,default:!1}},data:()=>({isTruncated:!1}),computed:{middleIndex(){return Math.floor(this.text.length/2)},first(){return this.text.slice(0,this.middleIndex)},last(){return this.text.slice(this.middleIndex)},isTooltipDisabled(){return!this.withTooltip||!this.isTruncated}},watch:{withTooltip(e){e&&this.checkTruncationState()}},methods:{checkTruncationState(){this.withTooltip&&(this.isTruncated=this.$refs.text.scrollWidth>this.$refs.text.offsetWidth)}}};const d=s()({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.position===e.$options.POSITION.START?i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{disabled:e.isTooltipDisabled},expression:"{ disabled: isTooltipDisabled }"},{name:"gl-resize-observer",rawName:"v-gl-resize-observer:[withTooltip]",value:e.checkTruncationState,expression:"checkTruncationState",arg:e.withTooltip}],staticClass:"gl-truncate",attrs:{title:e.text}},[i("span",{ref:"text",staticClass:"gl-truncate-start gl-text-overflow-ellipsis!"},[e._v("‎"+e._s(e.text)+"‎")])]):e.position===e.$options.POSITION.MIDDLE?i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{disabled:e.isTooltipDisabled},expression:"{ disabled: isTooltipDisabled }"},{name:"gl-resize-observer",rawName:"v-gl-resize-observer:[withTooltip]",value:e.checkTruncationState,expression:"checkTruncationState",arg:e.withTooltip}],staticClass:"gl-truncate",attrs:{title:e.text}},[i("span",{ref:"text",staticClass:"gl-truncate-end"},[e._v(e._s(e.first))]),i("span",{staticClass:"gl-truncate-start"},[e._v("‎"+e._s(e.last)+"‎")])]):i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{disabled:e.isTooltipDisabled},expression:"{ disabled: isTooltipDisabled }"},{name:"gl-resize-observer",rawName:"v-gl-resize-observer:[withTooltip]",value:e.checkTruncationState,expression:"checkTruncationState",arg:e.withTooltip}],staticClass:"gl-truncate",attrs:{"data-testid":"truncate-end-container",title:e.text}},[i("span",{ref:"text",staticClass:"gl-truncate-end"},[e._v(e._s(e.text))])])},staticRenderFns:[]},void 0,l,void 0,!1,void 0,!1,void 0,void 0,void 0);t.a=d},AiXD:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("3UXl"),i("iyoE");var n=i("3twG");function a(e,t,i=function(){}){return e.map((function(e){return{sha:e.commit.id,message:e.commit.message,titleHtml:e.commit_title_html,committedDate:e.commit.committed_date,commitPath:e.commit_path,fileName:e.file_name,filePath:Object(n.C)(t,e.file_name),__typename:"LogTreeCommit",...i(e)}}))}},"Fsq/":function(e,t,i){"use strict";i("FMw2");var n=i("LLbv"),a=i("A5dm"),r=i("bOix"),o=i("5QKO"),s={directives:{GlTooltip:n.a},components:{GlTruncate:a.a},mixins:[o.a],props:{time:{type:[String,Number,Date],required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},cssClass:{type:String,required:!1,default:""},dateTimeFormat:{type:String,required:!1,default:r.b,validator:function(e){return r.a.includes(e)}},enableTruncation:{type:Boolean,required:!1,default:!1}},computed:{timeAgo(){return this.timeFormatted(this.time,this.dateTimeFormat)},tooltipText(){return this.enableTruncation?void 0:this.tooltipTitle(this.time)}}},l=i("tBpV"),d=Object(l.a)(s,(function(){var e=this,t=e._self._c;return t("time",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:{placement:e.tooltipPlacement},expression:"{ placement: tooltipPlacement }",modifiers:{viewport:!0}}],class:e.cssClass,attrs:{title:e.tooltipText,datetime:e.time}},[e._t("default",(function(){return[e.enableTruncation?[t("gl-truncate",{attrs:{text:e.timeAgo,"with-tooltip":""}})]:[e._v(e._s(e.timeAgo))]]}),{timeAgo:e.timeAgo})],2)}),[],!1,null,null,null);t.a=d.exports},OGDS:function(e,t){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TreeEntry"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"flatPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getPaginatedTree"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ref"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nextPageCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"refType"}},type:{kind:"NamedType",name:{kind:"Name",value:"RefType"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"paginatedTree"},arguments:[{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}},{kind:"Argument",name:{kind:"Name",value:"ref"},value:{kind:"Variable",name:{kind:"Name",value:"ref"}}},{kind:"Argument",name:{kind:"Name",value:"refType"},value:{kind:"Variable",name:{kind:"Name",value:"refType"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"nextPageCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trees"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TreeEntry"},directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"submodules"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TreeEntry"},directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"treeUrl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"blobs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TreeEntry"},directives:[]},{kind:"Field",name:{kind:"Name",value:"mode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lfsOid"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:1063}};i.loc.source={body:"fragment TreeEntry on Entry {\n  __typename\n  id\n  sha\n  name\n  flatPath\n  type\n}\n\nquery getPaginatedTree(\n  $projectPath: ID!\n  $path: String\n  $ref: String!\n  $nextPageCursor: String\n  $refType: RefType\n) {\n  project(fullPath: $projectPath) {\n    id\n    __typename\n    repository {\n      __typename\n      paginatedTree(path: $path, ref: $ref, refType: $refType, after: $nextPageCursor) {\n        __typename\n        pageInfo {\n          __typename\n          endCursor\n          startCursor\n          hasNextPage\n        }\n        nodes {\n          __typename\n          trees {\n            __typename\n            nodes {\n              ...TreeEntry\n              webPath\n            }\n          }\n          submodules {\n            __typename\n            nodes {\n              ...TreeEntry\n              webUrl\n              treeUrl\n            }\n          }\n          blobs {\n            __typename\n            nodes {\n              ...TreeEntry\n              mode\n              webPath\n              lfsOid\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}function r(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.TreeEntry=r(i,"TreeEntry"),e.exports.getPaginatedTree=r(i,"getPaginatedTree")},XCOs:function(e,t,i){var n=i("rhmX"),a=/[\\^$.*+?()[\]{}|]/g,r=RegExp(a.source);e.exports=function(e){return(e=n(e))&&r.test(e)?e.replace(a,"\\$&"):e}},XqDB:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n=i("0zRR"),a=i("h3Ey"),r=i("/GZH"),o=i("o/E4"),s=i("QXXq"),l=i("BrvI"),d=i("7bmO"),c=i("GcM7"),u=i("tTwu"),m=Object(s.d)(n.M,a.L),p="__bv_modal_directive__",h=function(e){var t=e.modifiers,i=void 0===t?{}:t,n=e.arg,a=e.value;return Object(l.m)(a)?a:Object(l.m)(n)?n:Object(d.h)(i).reverse()[0]},f=function(e){return e&&Object(o.v)(e,".dropdown-menu > li, li.nav-item")&&Object(o.C)("a, button",e)||e},v=function(e){e&&"BUTTON"!==e.tagName&&(Object(o.o)(e,"role")||Object(o.E)(e,"role","button"),"A"===e.tagName||Object(o.o)(e,"tabindex")||Object(o.E)(e,"tabindex","0"))},g=function(e){var t=e[p]||{},i=t.trigger,n=t.handler;i&&n&&(Object(s.a)(i,"click",n,a.R),Object(s.a)(i,"keydown",n,a.R),Object(s.a)(e,"click",n,a.R),Object(s.a)(e,"keydown",n,a.R)),delete e[p]},b=function(e,t,i){var n=e[p]||{},l=h(t),d=f(e);l===n.target&&d===n.trigger||(g(e),function(e,t,i){var n=h(t),l=f(e);if(n&&l){var d=function(e){var a=e.currentTarget;if(!Object(o.r)(a)){var s=e.type,l=e.keyCode;"click"!==s&&("keydown"!==s||l!==r.c&&l!==r.h)||Object(c.a)(Object(u.a)(i,t)).$emit(m,n,a)}};e[p]={handler:d,target:n,trigger:l},v(l),Object(s.b)(l,"click",d,a.R),"BUTTON"!==l.tagName&&"button"===Object(o.h)(l,"role")&&Object(s.b)(l,"keydown",d,a.R)}}(e,t,i)),v(d)},k={inserted:b,updated:function(){},componentUpdated:b,unbind:g}},h6C7:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getProjectPath"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"projectPath"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:47}};i.loc.source={body:"query getProjectPath {\n  projectPath @client\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.getProjectPath=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"getProjectPath")},htAy:function(e,t,i){"use strict";i.d(t,"a",(function(){return de}));var n=i("XCOs"),a=i.n(n),r=(i("FMw2"),i("ewH8")),o=i("lRsd"),s=i("3twG"),l=(i("ZzK0"),i("z6RN"),i("BzOf"),i("kYRv")),d=i("uQq6"),c={components:{BlobContentViewer:l.a},beforeRouteEnter(e,t,i){i((function({$options:e}){e.limitedContainerElements.forEach((function(e){return e.classList.remove(d.l)}))}))},beforeRouteLeave(e,t,i){this.$options.limitedContainerElements.forEach((function(e){return e.classList.add(d.l)})),i()},props:{path:{type:String,required:!0},projectPath:{type:String,required:!0},refType:{type:String,required:!1,default:null}},limitedContainerElements:document.querySelectorAll("."+d.l)},u=i("tBpV"),m=Object(u.a)(c,(function(){return(0,this._self._c)("blob-content-viewer",{attrs:{path:this.path,"project-path":this.projectPath,"ref-type":this.refType}})}),[],!1,null,null,null).exports,p=i("t8rf"),h=(i("RFHG"),i("xuo1"),i("B++/"),i("47t/"),i("OGDS")),f=i.n(h),v=i("jlnU"),g=i("jEr0"),b=i("h6C7"),k=i.n(b);const y=["index","readme"],w=["ad","adoc","asciidoc","creole","markdown","md","mdown","mediawiki","mkd","mkdn","org","rdoc","rst","textile","wiki"],S=function(e){return new RegExp(`^(${y.join("|")})\\.(${w.join("|")})$`,"i").test(e.name)},_=function(e){return new RegExp(`^(${y.join("|")})(\\.txt)?$`,"i").test(e.name)};i("v2fZ");var T=i("2ibD"),N=i("AiXD");let P=[],j=[];const x=function(e){return P.includes(e)},C=function(){P=[],j=[]},O=async function(e,t,i,n,a){if(x(n))return[];Array.from(Array(d.a)).forEach((function(e,t){return function(e){x(e)||e<0||P.push(e)}(n+t)}));return await function(e,t,i,n,a){if(j.includes(n)||n<0)return[];j.push(n);const r=gon.features.encodingLogsTree?encodeURI:encodeURIComponent,o=Object(s.C)(gon.relative_url_root||"/",e,"/-/refs/",r(i),"/logs_tree/",r(function(e){return e.replace(/^\//,"")}(t)));return T.a.get(o,{params:{format:"json",offset:n,ref_type:a}}).then((function({data:e}){return Object(N.a)(e,t)})).catch((function(){return Object(v.createAlert)({message:d.i})}))}(e,t,i,n,a)};var E=i("iCwi"),F=i("4+8U"),D=i("4lAS"),R=i("/lV4"),q=Object(u.a)({},(function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{attrs:{id:"name",scope:"col"}},[e._v(e._s(e.s__("ProjectFileTree|Name")))]),e._v(" "),t("th",{staticClass:"d-none d-sm-table-cell",attrs:{id:"last-commit",scope:"col"}},[e._v(e._s(e.__("Last commit")))]),e._v(" "),t("th",{staticClass:"text-right",attrs:{id:"last-update",scope:"col"}},[e._v(e._s(e.__("Last update")))])])])}),[],!1,null,null,null).exports,L=(i("3UXl"),i("iyoE"),i("FkSe")),$=i("LLbv"),A={components:{GlLoadingIcon:L.a},directives:{GlTooltip:$.a},inject:["refType"],props:{commitRef:{type:String,required:!0},path:{type:String,required:!0},loadingPath:{type:String,required:!1,default:null}},computed:{parentPath(){const e=this.path.split("/");return e.pop(),e.map((function(e){return encodeURIComponent(e)})).join("/")},parentRoute(){const e=Object(s.C)("/-/tree",this.commitRef,this.parentPath);return Object(s.g)({path:e,refType:this.refType})}},methods:{clickRow(){this.$router.push(this.parentRoute)}}},I=Object(u.a)(A,(function(){var e=this,t=e._self._c;return t("tr",{staticClass:"tree-item"},[t("td",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.left.viewport",modifiers:{left:!0,viewport:!0}}],staticClass:"tree-item-file-name",attrs:{title:e.__("Go to parent directory"),colspan:"3"},on:{click:function(t){return t.target!==t.currentTarget?null:e.clickRow.apply(null,arguments)}}},[e.parentPath===e.loadingPath?t("gl-loading-icon",{staticClass:"d-inline-block align-text-bottom",attrs:{size:"sm",inline:""}}):t("router-link",{attrs:{to:e.parentRoute,"aria-label":e.__("Go to parent")}},[e._v(" .. ")])],1)])}),[],!1,null,null,null).exports,G=i("Lzak"),z=i("MV2A"),U=i("s1D3"),V=i("ehHk"),M=i("KFC0"),H=i.n(M);let B,Q;const X={bind:(e,t)=>{let{value:i}=t;if(!H()(i))throw TypeError("Directive value must be a function");const n=()=>{B&&(clearTimeout(B),B=void 0)};Q=()=>{e.addEventListener("mouseout",n,{passive:!0}),B=setTimeout(()=>{i(e),e.removeEventListener("mouseover",Q,!0),e.removeEventListener("mouseout",n),B=void 0},100)},e.addEventListener("mouseover",Q,{capture:!0,passive:!0})},unbind:e=>{e.removeEventListener("mouseover",Q,!0)}};var K=i("Mp8J"),J=i("9dZE"),Z=i("Fsq/"),W=i("ilhb"),Y=i.n(W),ee={components:{GlBadge:G.a,GlLink:z.a,GlSkeletonLoader:F.a,GlLoadingIcon:L.a,GlIcon:U.a,TimeagoTooltip:Z.a,FileIcon:J.a,GlIntersectionObserver:V.a},directives:{GlTooltip:$.a,GlHoverLoad:X,SafeHtml:K.a},mixins:[g.a],inject:["refType"],props:{commitInfo:{type:Object,required:!1,default:null},rowNumber:{type:Number,required:!1,default:null},totalEntries:{type:Number,required:!0},id:{type:String,required:!0},sha:{type:String,required:!0},projectPath:{type:String,required:!0},currentPath:{type:String,required:!0},name:{type:String,required:!0},path:{type:String,required:!0},mode:{type:String,required:!1,default:""},type:{type:String,required:!0},url:{type:String,required:!1,default:null},lfsOid:{type:String,required:!1,default:null},submoduleTreeUrl:{type:String,required:!1,default:null},loadingPath:{type:String,required:!1,default:""}},data:()=>({hasRowAppeared:!1,delayedRowAppear:null}),computed:{commitData(){return this.commitInfo},routerLinkTo(){return this.isBlob?Object(s.g)({path:Object(s.C)("/-/blob",this.escapedRef,encodeURI(this.path)),refType:this.refType}):this.isFolder?Object(s.g)({path:Object(s.C)("/-/tree",this.escapedRef,encodeURI(this.path)),refType:this.refType}):null},isBlob(){return"blob"===this.type},isFolder(){return"tree"===this.type},isSubmodule(){return"commit"===this.type},linkComponent(){return this.isFolder||this.isBlob?"router-link":"a"},fullPath(){return this.path.replace(new RegExp(`^${a()(this.currentPath)}/`),"")},shortSha(){return this.sha.slice(0,8)},hasLockLabel(){return this.commitData&&this.commitData.lockLabel},showSkeletonLoader(){return!this.commitData&&this.hasRowAppeared}},methods:{handlePreload(){return this.isFolder?this.loadFolder():this.loadBlob()},loadFolder(){var e;this.apolloQuery(f.a,{projectPath:this.projectPath,ref:this.ref,refType:(null===(e=this.refType)||void 0===e?void 0:e.toUpperCase())||null,path:this.path,nextPageCursor:"",pageSize:d.x})},loadBlob(){var e;this.apolloQuery(Y.a,{projectPath:this.projectPath,filePath:this.path,ref:this.ref,refType:(null===(e=this.refType)||void 0===e?void 0:e.toUpperCase())||null,shouldFetchRawText:!0})},apolloQuery(e,t){this.$apollo.query({query:e,variables:t})},rowAppeared(){var e=this;this.hasRowAppeared=!0,this.commitInfo||(this.delayedRowAppear=setTimeout((function(){return e.$emit("row-appear",e.rowNumber)}),d.r))},rowDisappeared(){clearTimeout(this.delayedRowAppear),this.hasRowAppeared=!1}},safeHtmlConfig:{ADD_TAGS:["gl-emoji"]}},te=Object(u.a)(ee,(function(){var e=this,t=e._self._c;return t("tr",{staticClass:"tree-item"},[t("td",{staticClass:"tree-item-file-name cursor-default position-relative"},[t(e.linkComponent,{directives:[{name:"gl-hover-load",rawName:"v-gl-hover-load",value:e.handlePreload,expression:"handlePreload"},{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{placement:"left",boundary:"viewport"},expression:"{ placement: 'left', boundary: 'viewport' }"}],ref:"link",tag:"component",staticClass:"tree-item-link str-truncated",class:{"is-submodule":e.isSubmodule},attrs:{title:e.fullPath,to:e.routerLinkTo,href:e.url,"data-testid":"file-name-link"}},[t("file-icon",{staticClass:"mr-1 position-relative text-secondary",attrs:{"file-name":e.fullPath,"file-mode":e.mode,folder:e.isFolder,submodule:e.isSubmodule,loading:e.path===e.loadingPath,"css-classes":"position-relative file-icon"}}),t("span",{staticClass:"position-relative"},[e._v(e._s(e.fullPath))])],1),e._v(" "),e.lfsOid?t("gl-badge",{staticClass:"ml-1",attrs:{variant:"muted",size:"sm","data-testid":"label-lfs"}},[e._v("LFS")]):e._e(),e._v(" "),e.isSubmodule?[e._v("\n      @ "),t("gl-link",{staticClass:"commit-sha",attrs:{href:e.submoduleTreeUrl}},[e._v(e._s(e.shortSha))])]:e._e(),e._v(" "),e.hasLockLabel?t("gl-icon",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"ml-1",attrs:{title:e.commitData.lockLabel,name:"lock",size:12}}):e._e()],2),e._v(" "),t("td",{staticClass:"d-none d-sm-table-cell tree-commit cursor-default"},[e.commitData?t("gl-link",{directives:[{name:"safe-html",rawName:"v-safe-html:[$options.safeHtmlConfig]",value:e.commitData.titleHtml,expression:"commitData.titleHtml",arg:e.$options.safeHtmlConfig}],staticClass:"str-truncated-100 tree-commit-link gl-text-gray-600",attrs:{href:e.commitData.commitPath,title:e.commitData.message}}):e._e(),e._v(" "),t("gl-intersection-observer",{on:{appear:e.rowAppeared,disappear:e.rowDisappeared}},[e.showSkeletonLoader?t("gl-skeleton-loader",{attrs:{lines:1}}):e._e()],1)],1),e._v(" "),t("td",{staticClass:"tree-time-ago text-right cursor-default gl-text-gray-600"},[t("gl-intersection-observer",{on:{appear:e.rowAppeared,disappear:e.rowDisappeared}},[e.commitData?t("timeago-tooltip",{attrs:{time:e.commitData.committedDate}}):e._e()],1),e._v(" "),e.showSkeletonLoader?t("gl-skeleton-loader",{attrs:{lines:1}}):e._e()],1)])}),[],!1,null,null,null).exports,ie={components:{GlSkeletonLoader:F.a,TableHeader:q,TableRow:te,ParentRow:I,GlButton:D.a},mixins:[g.a],apollo:{projectPath:{query:k.a}},props:{commits:{type:Array,required:!1,default:function(){return[]}},path:{type:String,required:!0},entries:{type:Object,required:!1,default:function(){return{}}},isLoading:{type:Boolean,required:!0},loadingPath:{type:String,required:!1,default:""},hasMore:{type:Boolean,required:!0}},data:()=>({projectPath:"",rowNumbers:{}}),computed:{totalEntries(){return Object.values(this.entries).flat().length},tableCaption(){return this.isLoading?Object(R.h)(Object(R.a)("Loading files, directories, and submodules in the path %{path} for commit reference %{ref}"),{path:this.path,ref:this.ref}):Object(R.h)(Object(R.a)("Files, directories, and submodules in the path %{path} for commit reference %{ref}"),{path:this.path,ref:this.ref})},showParentRow(){return-1===["","/"].indexOf(this.path)}},methods:{showMore(){this.$emit("showMore")},generateRowNumber(e,t){var i,n;const{flatPath:a,id:r}=e,o=`${a}-${r}-${t}`,s=(null===(i=this.entries)||void 0===i||null===(i=i.trees)||void 0===i?void 0:i.length)||0,l=(null===(n=this.entries)||void 0===n||null===(n=n.blobs)||void 0===n?void 0:n.length)||0;return this.rowNumbers[o]||0===this.rowNumbers[o]||("commit"===e.type?this.rowNumbers[o]=s+l+t:"blob"===e.type?this.rowNumbers[o]=s+t:this.rowNumbers[o]=t),this.rowNumbers[o]},getCommit(e){var t=this;return this.commits.find((function(i){return i.filePath===Object(s.C)(t.path,e)}))}}},ne=Object(u.a)(ie,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tree-content-holder"},[t("div",{staticClass:"table-holder bordered-box"},[t("table",{staticClass:"table tree-table",class:{"gl-table-layout-fixed":!e.showParentRow},attrs:{"aria-label":e.tableCaption,"aria-live":"polite","data-testid":"file-tree-table"}},[e._m(0),e._v(" "),t("tbody",[e.showParentRow?t("parent-row",{attrs:{"commit-ref":e.escapedRef,path:e.path,"loading-path":e.loadingPath}}):e._e(),e._v(" "),e._l(e.entries,(function(i){return e._l(i,(function(i,n){return t("table-row",e._g({key:`${i.flatPath}-${i.id}-${n}`,attrs:{id:i.id,sha:i.sha,"project-path":e.projectPath,"current-path":e.path,name:i.name,path:i.flatPath,type:i.type,url:i.webUrl||i.webPath,mode:i.mode,"submodule-tree-url":i.treeUrl,"lfs-oid":i.lfsOid,"loading-path":e.loadingPath,"total-entries":e.totalEntries,"row-number":e.generateRowNumber(i,n),"commit-info":e.getCommit(i.name)}},e.$listeners))}))})),e._v(" "),e.isLoading?e._l(5,(function(i){return t("tr",{key:i,attrs:{"aria-hidden":"true"}},[t("td",[t("gl-skeleton-loader",{attrs:{lines:1}})],1),e._v(" "),t("td",{staticClass:"gl-display-none gl-sm-display-block"},[t("gl-skeleton-loader",{attrs:{lines:1}})],1),e._v(" "),t("td",[t("div",{staticClass:"gl-display-flex gl-lg-justify-content-end"},[t("gl-skeleton-loader",{attrs:{"equal-width-lines":!0,lines:1}})],1)])])})):e._e(),e._v(" "),e.hasMore?[t("tr",[t("td",{staticClass:"gl-p-0!",attrs:{align:"center",colspan:"3"}},[t("gl-button",{staticClass:"gl-display-flex gl-w-full gl-py-4!",attrs:{variant:"link",loading:e.isLoading},on:{click:e.showMore}},[e._v("\n                "+e._s(e.s__("ProjectFileTree|Show more"))+"\n              ")])],1)])]:e._e()],2)],1)])])}),[function(){return(0,this._self._c)("table-header")}],!1,null,null,null).exports,ae={i18n:d.y,components:{FileTable:ne,FilePreview:E.a},mixins:[g.a],apollo:{projectPath:{query:k.a}},inject:["refType"],props:{path:{type:String,required:!1,default:"/"},loadingPath:{type:String,required:!1,default:""}},data:()=>({commits:[],projectPath:"",nextPageCursor:"",pagesLoaded:1,entries:{trees:[],submodules:[],blobs:[]},isLoadingFiles:!1,isOverLimit:!1,clickedShowMore:!1,fetchCounter:0}),computed:{totalEntries(){return Object.values(this.entries).flat().length},readme(){return(e=this.entries.blobs).find(S)||e.find(_);var e},pageLimitReached(){return this.totalEntries/this.pagesLoaded>=d.w},hasShowMore(){return!this.clickedShowMore&&this.pageLimitReached}},watch:{$route:function(){this.entries.trees=[],this.entries.submodules=[],this.entries.blobs=[],this.nextPageCursor="",C(),this.fetchFiles()}},mounted(){var e=this;this.$nextTick((function(){C(),e.fetchFiles()}))},methods:{fetchFiles(){var e,t=this;const i=this.path||"/";return this.isLoadingFiles=!0,this.$apollo.query({query:f.a,variables:{projectPath:this.projectPath,ref:this.ref,refType:null===(e=this.refType)||void 0===e?void 0:e.toUpperCase(),path:i,nextPageCursor:this.nextPageCursor,pageSize:d.x}}).then((function({data:e}){var n;if(e.errors)throw e.errors;if(null==e||null===(n=e.project)||void 0===n||!n.repository||i!==(t.path||"/"))return;const{project:{repository:{paginatedTree:{pageInfo:a}}}}=e;t.isLoadingFiles=!1,t.entries=Object.keys(t.entries).reduce((function(i,n){return{...i,[n]:t.normalizeData(n,e.project.repository.paginatedTree.nodes[0][n])}}),{}),null!=a&&a.hasNextPage&&(t.nextPageCursor=a.endCursor,t.fetchCounter+=1,t.pageLimitReached&&!t.clickedShowMore||(t.fetchFiles(),t.clickedShowMore=!1))})).catch((function(e){let i;e.graphQLErrors&&(i=e.graphQLErrors.find((function(e){var t;return(null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)===d.h})));const n=i?t.$options.i18n.gitalyError:t.$options.i18n.generalError;Object(v.createAlert)({message:n,captureError:!0})}))},normalizeData(e,t){return this.entries[e].concat(t.nodes)},hasNextPage:e=>[].concat(e.trees.pageInfo,e.submodules.pageInfo,e.blobs.pageInfo).find((function({hasNextPage:e}){return e})),handleRowAppear(e){x(e)||this.loadCommitData(e-e%d.a)},loadCommitData(e){O(this.projectPath,this.path,this.ref,e,this.refType).then(this.setCommitData).catch((function(){}))},setCommitData(e){this.commits=this.commits.concat(e)},handleShowMore(){this.clickedShowMore=!0,this.pagesLoaded+=1,this.fetchFiles()}}},re={components:{TreeContent:Object(u.a)(ae,(function(){var e=this,t=e._self._c;return t("div",[t("file-table",{attrs:{path:e.path,entries:e.entries,"is-loading":e.isLoadingFiles,"loading-path":e.loadingPath,"has-more":e.hasShowMore,commits:e.commits},on:{showMore:e.handleShowMore,"row-appear":e.handleRowAppear}}),e._v(" "),e.readme?t("file-preview",{attrs:{blob:e.readme}}):e._e()],1)}),[],!1,null,null,null).exports},mixins:[{mixins:[g.a],apollo:{projectPath:{query:k.a}},data:()=>({projectPath:"",loadingPath:null}),beforeRouteUpdate(e,t,i){this.preload(e.params.path,i)},methods:{preload(e="/",t){var i;return this.loadingPath=e.replace(/^\//,""),this.$apollo.query({query:f.a,variables:{projectPath:this.projectPath,ref:this.ref,refType:null===(i=this.refType)||void 0===i?void 0:i.toUpperCase(),path:this.loadingPath,nextPageCursor:"",pageSize:100}}).then((function(){return t()}))}}}],provide(){return{refType:this.refType}},props:{path:{type:String,required:!1,default:"/"},refType:{type:String,required:!1,default:""}},computed:{isRoot(){return"/"===this.path}},watch:{isRoot:{immediate:!0,handler:"updateElements"}},methods:{updateElements(e){Object(p.a)(".js-show-on-root",e),Object(p.a)(".js-hide-on-root",!e)}}},oe=Object(u.a)(re,(function(){return(0,this._self._c)("tree-content",{attrs:{path:this.path,"loading-path":this.loadingPath}})}),[],!1,null,null,null).exports,se={components:{TreePage:oe},props:{refType:{type:String,required:!1,default:null}},mounted(){this.updateProjectElements(!0)},beforeDestroy(){this.updateProjectElements(!1)},methods:{updateProjectElements(e){Object(p.a)(".js-show-on-project-root",e)}}},le=Object(u.a)(se,(function(){return(0,this._self._c)("tree-page",{attrs:{path:"/","ref-type":this.refType}})}),[],!1,null,null,null).exports;function de(e,t){const i={component:oe,props:function(e){var t;return{path:(null===(t=e.params.path)||void 0===t?void 0:t.replace(/^\//,""))||"/",refType:e.query.ref_type||null}}},n={component:m,props:function(t){return{path:t.params.path,projectPath:e,refType:t.query.ref_type||null}}},r=new o.a({mode:"history",base:Object(s.C)(gon.relative_url_root||"",e),routes:[{name:"treePathDecoded",path:`(/-)?/tree/${decodeURI(t)}/:path*`,...i},{name:"treePath",path:`(/-)?/tree/${a()(t)}/:path*`,...i},{name:"blobPathDecoded",path:`(/-)?/blob/${decodeURI(t)}/:path*`,...n},{name:"blobPath",path:`(/-)?/blob/${a()(t)}/:path*`,...n},{path:"/",name:"projectRoot",component:le,props:{refType:"HEADS"},meta:{refType:"HEADS"}}]});return r.afterEach((function(i){const n=!i.name.includes("blobPath");window.gl.webIDEPath=Object(s.W)(Object(s.C)("/",e,"edit",decodeURI(t),"-",i.params.path||"",n&&"/"))})),r}r.default.use(o.a)},iCwi:function(e,t,i){"use strict";var n=i("s1D3"),a=i("MV2A"),r=i("FkSe"),o=i("Mp8J"),s=i("NmEs"),l=i("EJYk"),d=i("kytF"),c={apollo:{readme:{query:i.n(d).a,variables(){return{url:this.blob.webPath}}}},components:{GlIcon:n.a,GlLink:a.a,GlLoadingIcon:r.a},directives:{SafeHtml:o.a},props:{blob:{type:Object,required:!0}},data:()=>({readme:null}),computed:{isLoading(){return this.$apollo.queries.readme.loading}},watch:{readme(e){var t=this;e&&this.$nextTick((function(){Object(s.n)(),Object(l.a)(t.$refs.readme)}))}},safeHtmlConfig:{ADD_TAGS:["copy-code"]}},u=i("tBpV"),m=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("article",{staticClass:"file-holder limited-width-container readme-holder"},[t("div",{staticClass:"js-file-title file-title-flex-parent"},[t("div",{staticClass:"file-header-content"},[t("gl-icon",{attrs:{name:"doc-text"}}),e._v(" "),t("gl-link",{attrs:{href:e.blob.webPath}},[t("strong",[e._v(e._s(e.blob.name))])])],1)]),e._v(" "),t("div",{staticClass:"blob-viewer",attrs:{"data-testid":"blob-viewer-content",itemprop:"about"}},[e.isLoading?t("gl-loading-icon",{staticClass:"my-4 mx-auto",attrs:{size:"lg",color:"dark"}}):e.readme?t("div",{directives:[{name:"safe-html",rawName:"v-safe-html:[$options.safeHtmlConfig]",value:e.readme.html,expression:"readme.html",arg:e.$options.safeHtmlConfig}],ref:"readme"}):e._e()],1)])}),[],!1,null,null,null);t.a=m.exports},kytF:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getReadme"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"readme"},arguments:[{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:78}};i.loc.source={body:"query getReadme($url: String!) {\n  readme(url: $url) @client {\n    html\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.getReadme=function(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(i,"getReadme")},t8rf:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return r}));i("ZzK0"),i("z6RN"),i("BzOf");var n=i("3twG");const a=function(e,t){document.querySelectorAll(e).forEach((function(e){return e.classList.toggle("hidden",!t)}))},r=function(e,t,i){const a=document.querySelector(e);a&&(a.action=Object(n.C)(t,i))}},waGw:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("KFC0"),a=i.n(n);let r=null;const o=(e,t)=>{if(!a()(t))throw TypeError("directive value must be a function");r||(r=new ResizeObserver(e=>{e.forEach(e=>{e.target.glResizeHandler(e)})})),e.glResizeHandler=t,r.observe(e)},s=e=>{var t;e.glResizeHandler&&(delete e.glResizeHandler,null===(t=r)||void 0===t||t.unobserve(e))},l={bind(e,t){let{value:i,arg:n=!0}=t;n&&o(e,i)},update(e,t){let{value:i,arg:n=!0}=t;n?o(e,i):s(e)},unbind:s}}}]);
//# sourceMappingURL=commons-pages.projects.show-pages.projects.tree.show.6eb8cc1c.chunk.js.map